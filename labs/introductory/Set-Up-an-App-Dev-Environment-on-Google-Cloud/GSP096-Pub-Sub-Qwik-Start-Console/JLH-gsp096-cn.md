# GSP096 - Pub/Sub: Qwik Start - Console

## 簡介
Pub/Sub 是一種訊息服務，用於在應用程式和服務之間交換事件資料。資料生產者將訊息發佈到 Pub/Sub 主題。消費者為該主題建立訂閱。訂閱者可以從訂閱中提取訊息，或者配置為推送訂閱的 webhooks。每個訂閱者必須在可配置的時間視窗內確認每個訊息。

## 先決條件
- Google Cloud Platform 帳戶
- 基本 GCP 知識
- 熟悉 Cloud Console

## 學習目標
在本實驗室結束時，您將能夠：
- 設定主題來保存資料
- 訂閱主題以存取資料
- 使用提取訂閱者發佈然後消費訊息

## 預估時間
30 分鐘

## 步驟

### 任務 1：設定 Pub/Sub

要使用 Pub/Sub，您需要建立主題來保存資料，以及建立訂閱來存取發佈到主題的資料。

1. 從 **導航選單** () 點擊 **查看所有產品**。前往 **Analytics** 區段，點擊 **Pub/Sub** > **主題**。

2. 點擊 **建立主題**。

3. 主題必須有唯一的名稱。在本實驗室中，將您主題命名為 `MyTopic`。在 **建立主題** 對話框中：
   - 對於 **主題 ID**，輸入 `MyTopic`。
   - 將其他欄位保留為預設值。
   - 點擊 **建立**。

您已經建立了主題。

### 任務 2：新增訂閱

現在您將建立訂閱來存取主題。

1. 點擊左側面板中的 **主題** 返回 **主題** 頁面。對於剛剛建立的主題，點擊三個點圖示 > **建立訂閱**。

2. 在 **為主題新增訂閱** 對話框中：
   - 為訂閱輸入名稱，例如 `MySub`
   - 將傳遞類型設定為 **提取**。
   - 將所有其他選項保留為預設值。

3. 點擊 **建立**。

您的訂閱會列在訂閱列表中。

### 任務 3：測試您的理解

以下是多選題，用於強化您對本實驗室概念的理解。請盡力回答這些問題。

發佈者應用程式建立並發送訊息到 ____。訂閱者應用程式為主題建立 ____ 以從中接收訊息。

Cloud Pub/Sub 是一種異步訊息服務，設計為高度可靠且可擴展。

### 任務 4：將訊息發佈到主題

1. 返回 **pub/sub** > **主題** 並開啟 **MyTopics** 頁面。
2. 在主題詳細資料頁面中，點擊 **訊息** 分頁，然後點擊 **發佈訊息**。
3. 在 **訊息** 欄位中輸入 `Hello World`，然後點擊 **發佈**。

### 任務 5：查看訊息

要查看訊息，使用訂閱 (`MySub`) 從主題 (`MyTopic`) 提取訊息 (`Hello World`)。

- 在 Cloud Shell 中輸入以下命令：

```bash
gcloud pubsub subscriptions pull --auto-ack MySub
```

訊息會出現在命令輸出的 DATA 欄位中。

您建立了 Pub/Sub 主題、向主題發佈、建立了訂閱，然後使用訂閱從主題提取資料。

## 驗證

要驗證實驗室是否成功完成：

1. 主題 `MyTopic` 已在 Pub/Sub 中建立
2. 訂閱 `MySub` 已建立並附加到主題
3. 訊息 "Hello World" 已成功發佈和消費

## 故障排除

常見問題及其解決方案：

- **主題建立失敗**：確保您有適當的權限且主題名稱是唯一的
- **訂閱建立失敗**：驗證主題存在且您有權限建立訂閱
- **未收到訊息**：檢查訂閱是否正確附加到主題，並嘗試重新發佈訊息

## 清理

要清理資源並避免費用：

1. 在 Cloud Console 中，前往 **Pub/Sub**
2. 刪除訂閱 `MySub`
3. 刪除主題 `MyTopic`

## 額外資源

- [Pub/Sub 文檔](https://cloud.google.com/pubsub/docs)
- [Pub/Sub 快速入門](https://cloud.google.com/pubsub/docs/quickstart-console)
- 相關實驗室：GSP096（當前實驗室）

## 筆記

- Pub/Sub 是一種完全託管的即時訊息服務
- 主題保存訊息，訂閱允許消費者存取這些訊息
- 提取訂閱需要消費者主動檢索訊息
- 推送訂閱自動將訊息傳遞到 webhooks
